(this["webpackJsonptest-front"]=this["webpackJsonptest-front"]||[]).push([[0],{41:function(e,t,a){e.exports=a(72)},66:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),l=a.n(c),o=a(5),u=a(11),s=a(6),i=a(8),m=a(34),d=a.n(m).a.create({baseURL:"http://193.124.114.46:3001/"});d.interceptors.request.use((function(e){var t=localStorage.getItem("id_token");return null!=t&&(e.headers.Authorization="bearer ".concat(t)),e})),d.interceptors.response.use((function(e){return e}),(function(e){return"Unauthorized"===e.response.statusText&&(window.location.pathname="login"),Promise.reject(e)}));var p=d;a(66);var E=a(35),f=a.n(E);function b(e){var t=e.data,a=e.search,n=e.select,c=e.value,l=e.label;return r.a.createElement("div",{className:"autocomplete"},r.a.createElement("span",{className:"label"},l),r.a.createElement(f.a,{className:"create-search",getItemValue:function(e){return e.name},items:t,renderItem:function(e){return r.a.createElement("p",{key:e.id},e.name)},value:c,onChange:function(e){return a(e.target.value)},onSelect:function(e){return n(e)},menuStyle:{borderRadius:"3px",background:t.length?"#eee":"#fff",padding:"5px",fontSize:"14px",position:"fixed",color:"#000",overflow:"auto"},wrapperStyle:{display:"block"}}))}function g(e){return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:e.label},e.label),r.a.createElement("input",{type:e.type||"text",className:"form-control",onChange:function(t){return e.onChange(t,e.name)},name:e.name,required:e.required,placeholder:e.placeholder}))}function v(e){var t=e.message,a=e.onClick,c=e.type;return Object(n.useEffect)((function(){setTimeout(a,3e3)}),[t,a]),t?r.a.createElement("div",{onClick:a,className:"alert alert-".concat(c||"danger"),role:"alert"},t):null}function h(e){var t=e.data,a=t.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("th",{scope:"row"},e.id),r.a.createElement("td",null,e.date),r.a.createElement("td",null,e.username),r.a.createElement("td",null,e.amount),r.a.createElement("td",null,e.balance))}));return t.length?r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"#"),r.a.createElement("th",{scope:"col"},"Date"),r.a.createElement("th",{scope:"col"},"username"),r.a.createElement("th",{scope:"col"},"amount"),r.a.createElement("th",{scope:"col"},"balance"))),r.a.createElement("tbody",null,a)):r.a.createElement("h5",{className:"text-center"},"No data...")}var O=Object(i.b)((function(e){return{user:e.user}}),(function(e){return{updateUser:function(){return e((function(e){e({type:"USER",payload:p.get("/api/protected/user-info").then((function(e){return e.data.user_info_token}))})}))},clearUser:function(){return e((function(e){localStorage.clear(),e({type:"USER_CLEAR"})}))}}}))((function(e){var t=e.updateUser,a=e.user,c=e.clearUser;return Object(n.useEffect)((function(){localStorage.getItem("id_token")&&t()}),[t]),r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.c,{activeClassName:"active",className:"nav-link",to:"/list"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.c,{activeClassName:"active",className:"nav-link",to:"/create"},"Create")))),r.a.createElement("h5",null,"Username: ",a.data.name," ",r.a.createElement(o.b,{to:"/login",onClick:c},"Logout")))}));var S=Object(i.b)((function(e){return{user:e.user}}),(function(e){return{loginUser:function(t){return e(function(e){return function(t){t({type:"USER",payload:p.post("sessions/create",e).then((function(e){return e.data}))})}}(t))}}}))((function(e){var t=Object(u.g)(),a=r.a.useState({}),c=Object(s.a)(a,2),l=c[0],i=c[1],m=r.a.useState(null),d=Object(s.a)(m,2),p=d[0],E=d[1],f=e.user;function b(e,t){var a={};a[t]=e.target.value,i(Object.assign(l,a))}return Object(n.useEffect)((function(){var e=f.error,a=f.data;e&&e.response&&E(e.response.data),a&&a.id_token&&(localStorage.setItem("id_token",a.id_token),t.push("/list"))}),[f,t]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"text-center"},"Login Page"),r.a.createElement(v,{message:p,onClick:function(){E(null)}}),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.loginUser(l)}},r.a.createElement(g,{name:"email",onChange:b,type:"email",label:"Email"}),r.a.createElement(g,{name:"password",onChange:b,label:"Password",type:"password"}),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},f.loading?"Loading ...":"Submit"),r.a.createElement(o.b,{to:"/registration"},"Sign up")))}));var j=Object(i.b)((function(e){return{user:e.user}}),(function(e){return{initUser:function(t){return e(function(e){return function(t){t({type:"USER",payload:p.post("users",e).then((function(e){return e.data}))})}}(t))}}}))((function(e){var t=Object(u.g)(),a=e.user,c=r.a.useState({}),l=Object(s.a)(c,2),o=l[0],i=l[1],m=r.a.useState(null),d=Object(s.a)(m,2),p=d[0],E=d[1];function f(e,t){var a={};a[t]=e.target.value,i(Object.assign(o,a))}return Object(n.useEffect)((function(){var e=a.error,n=a.data;e&&e.response&&E(e.response.data),n&&n.id_token&&(localStorage.setItem("id_token",n.id_token),t.push("/"))}),[a,t]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"text-center"},"Registration Page"),r.a.createElement(v,{message:p,onClick:function(){E(null)}}),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.initUser(o)}},r.a.createElement(g,{name:"username",onChange:f,label:"Username",placeholder:"Matt"}),r.a.createElement(g,{name:"email",onChange:f,label:"Email address",type:"email",placeholder:"matt@gmail.com"}),r.a.createElement(g,{name:"password",onChange:f,label:"Password",type:"password",placeholder:""}),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit")))})),y=a(40);a(71);var N=Object(i.b)((function(e){return{list:e.list}}),(function(e){return{initList:function(){return e((function(e){e({type:"LIST",payload:p.get("api/protected/transactions").then((function(e){return e.data}))})}))}}}))((function(e){var t=e.list,a=e.initList,c=r.a.useState([]),l=Object(s.a)(c,2),o=l[0],u=l[1];return Object(n.useEffect)((function(){return a()}),[a]),Object(n.useEffect)((function(){var e=t.data;e&&e.trans_token&&u(e.trans_token)}),[t]),r.a.createElement(r.a.Fragment,null,t.loading?r.a.createElement("h5",{className:"text-center"},"Loading..."):r.a.createElement(h,{data:o}))}));var U=Object(i.b)((function(e){return{users:e.users,transaction:e.transaction}}),(function(e){return{filterUsers:function(t){return e((a=t,function(e){e({type:"USERS",payload:p.post("/api/protected/users/list",{filter:a}).then((function(e){return e.data}))})}));var a},createTransaction:function(t){return e(function(e){return function(t){t({type:"TRANSACTION",payload:p.post("api/protected/transactions",e).then((function(e){return e.data}))})}}(t))}}}))((function(e){var t=Object(u.g)(),a=e.users,c=e.filterUsers,l=e.transaction,o=r.a.useState({}),i=Object(s.a)(o,2),m=i[0],d=i[1],p=r.a.useState(null),E=Object(s.a)(p,2),f=E[0],h=E[1],O=r.a.useState(),S=Object(s.a)(O,2),j=S[0],y=S[1],N=r.a.useState([]),U=Object(s.a)(N,2),C=U[0],_=U[1];return Object(n.useEffect)((function(){var e=a.data,n=l.error;n&&n.response&&h(n.response.data),l.data&&l.data.trans_token&&t.push("/list"),_(e)}),[a,l,t]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"text-center"},"Create new Transaction"),r.a.createElement(v,{message:f,onClick:function(){h(null)}}),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.createTransaction(m)}},r.a.createElement(b,{search:function(e){y(e),c(e)},select:function(e){y(e),d(Object.assign(m,{name:e}))},data:C,label:"Name",value:j}),r.a.createElement(g,{name:"amount",type:"number",onChange:function(e,t){var a={};a[t]=e.target.value,d(Object.assign(m,a))},label:"Amount"}),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},l.loading?"Loading...":"Submit")))}));function C(e){var t=e.component,a=Object(y.a)(e,["component"]),n=!!localStorage.getItem("id_token");return r.a.createElement(u.b,Object.assign({},a,{render:function(){return n?r.a.createElement(t,null):r.a.createElement(u.a,{to:"/login"})}}))}function _(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(O,null),r.a.createElement(C,{component:N,path:"/list"}),r.a.createElement(C,{component:U,path:"/create"}),r.a.createElement(u.a,{to:"/list"}))}var k=a(13),R=a(37),L=a(38),I=a(39),T=a(2),w={loading:!1,data:{},error:null};var D={loading:!1,error:null,data:[]};var x={loading:!1,data:[],error:null};var F={loading:!1,data:{},error:null};var A=Object(k.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_FULFILLED":return Object(T.a)({},e,{},{data:t.payload,loading:!1});case"USER_PENDING":return Object(T.a)({},e,{},{loading:!0});case"USER_UPDATE":return Object(T.a)({},e,{},{data:Object.assign(e.data,t.payload)});case"USER_REJECTED":return Object(T.a)({},e,{},{loading:!1,error:t.payload});case"USER_CLEAR":return Object(T.a)({},e,{},{loading:!1,error:null,data:{}});default:return e}},list:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LIST_FULFILLED":return Object(T.a)({},e,{},{data:t.payload,loading:!1});case"LIST_PENDING":return Object(T.a)({},e,{},{loading:!0});case"LIST_REJECTED":return Object(T.a)({},e,{},{loading:!1,error:t.payload});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USERS_FULFILLED":return Object(T.a)({},e,{},{data:t.payload,loading:!1,error:null});case"USERS_PENDING":return Object(T.a)({},e,{},{loading:!0});case"USERS_REJECTED":return Object(T.a)({},e,{},{data:[],loading:!1,error:t.payload});default:return e}},transaction:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TRANSACTION_FULFILLED":return Object(T.a)({},e,{},{data:t.payload,loading:!1,error:null});case"TRANSACTION_PENDING":return Object(T.a)({},e,{},{loading:!0});case"TRANSACTION_REJECTED":return Object(T.a)({},e,{},{data:{},loading:!1,error:t.payload});default:return Object(T.a)({},e,{},{error:null})}}}),P=Object(k.applyMiddleware)(L.a,I.a),J=Object(k.createStore)(A,Object(R.composeWithDevTools)(P)),G=r.a.createElement(i.a,{store:J},r.a.createElement(o.a,null,r.a.createElement((function(){return r.a.createElement("div",{className:"container"},r.a.createElement(o.a,null,r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/login",component:S}),r.a.createElement(u.b,{path:"/registration",component:j}),r.a.createElement(u.b,{component:_}))))}),null)));l.a.render(G,document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.72a00610.chunk.js.map